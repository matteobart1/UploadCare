<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Upload your images</title>

  <!-- Uploadcare Widget -->
  <script src="https://ucarecdn.com/libs/widget/3.x/uploadcare.full.min.js"></script>

  <script>
    function getQueryParam(name) {
      const urlParams = new URLSearchParams(window.location.search);
      return urlParams.get(name);
    }

    const sessionId = getQueryParam('session_id');

    UPLOADCARE_PUBLIC_KEY = 'b50db034602961a73c98'; // <-- Inserisci qui la tua Public Key
    UPLOADCARE_LOCALE = 'en';

    const widget = uploadcare.Widget('[role=uploadcare-uploader]');

    widget.onUploadComplete(info => {
      // Dopo il caricamento, carica di nuovo il file, imposta i metadata e salva
      uploadcare.fileFrom('uploaded', info.uuid).then(file => {
        file.setMetadata({ session_id: sessionId }).then(updatedFile => {
          updatedFile.store();
        });
      });
    });
  </script>
</head>

<body>

  <h2>Upload your product images</h2>

  <input
    type="hidden"
    role="uploadcare-uploader"
    data-multiple="true"
    data-tabs="file camera url"
    data-metadata='{"session_id": ""}'
    data-public-key="b50db034602961a73c98"
    data-path-value="true"
  />

</body>
</html>